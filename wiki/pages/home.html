{% extends "layout.html" %}

{% block title %}Virginia iGEM{% endblock %}
{% block lead %}Currently Under Construction{% endblock %}

{% block page_content %}

<style>


.container {
    position: relative;
    width: 60%; /* Adjust the width of the container as needed */
}

.curve-container {
    position: absolute;
    width: 100%;
    top: 0;
    pointer-events: none; /* Ensure the curve doesn't interfere with scrolling or other interactions */
}

.curve {
    display: block;
    width: 100%;
}

.moving-image-container {
    position: absolute;
    width: 100%;
    top: 0;
    pointer-events: none; /* Ensure the moving image doesn't interfere with scrolling or other interactions */
}

.moving-image {
    position: absolute;
    width: 50px; /* Adjust the size of the moving image as needed */
    height: 50px; /* Adjust the size of the moving image as needed */
}

.content {
    position: relative;
    width: 100%;
    height: 1000px;
}

.checkpoint {
    position: absolute;
    display: flex;
    align-items: center;
    transform: translate(-50%, -50%);
}

.checkpoint img {
    width: 50px; /* Adjust as needed */
    height: 50px; /* Adjust as needed */
    margin-right: 10px;
}

.text-box {
    opacity: 0;
    transition: opacity 1s;
}

.text-box.visible {
    opacity: 1;
}

</style>

<div class="container">
    <div class="curve-container">
        <svg class="curve" width="100%" height="1000" viewBox="0 0 500 1000" preserveAspectRatio="none">
            <path id="sinusoidal-path" d="M 0 0 Q 500 100, 250 200 T 250 400 T 250 600 T 250 800 T 250 1000" stroke="black" fill="transparent" stroke-width="2"/>
            <circle class="marker" cx="500" cy="200" r="3" fill=#D88993/>
            <circle class="marker" cx="0" cy="400" r="3" fill=#D88993/>
            <circle class="marker" cx="500" cy="600" r="3" fill=#D88993/>
            <circle class="marker" cx="0" cy="800" r="3" fill=#D88993/>
            <circle class="marker" cx="500" cy="1000" r="3" fill=#D88993/>
        </svg>
    </div>

    <div class="moving-image-container">
        <img src="https://static.vecteezy.com/system/resources/previews/017/415/542/original/virus-and-bacteria-cute-cartoon-character-png.png" alt="Moving Image" class="moving-image">
    </div>

    <div class="content">
        <div class="checkpoint">
            <img src="image1.jpg" alt="Image 1" class="image">
            <div class="text-box">Text Box 1</div>
        </div>
        <div class="checkpoint">
            <img src="image2.jpg" alt="Image 2" class="image">
            <div class="text-box">Text Box 2</div>
        </div>
        <div class="checkpoint">
            <img src="image3.jpg" alt="Image 3" class="image">
            <div class="text-box">Text Box 3</div>
        </div>
        <div class="checkpoint">
            <img src="image4.jpg" alt="Image 4" class="image">
            <div class="text-box">Text Box 4</div>
        </div>
        <div class="checkpoint">
            <img src="image5.jpg" alt="Image 5" class="image">
            <div class="text-box">Text Box 5</div>
        </div>
        <!-- Add more checkpoints as needed -->
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const svgPath = document.getElementById('sinusoidal-path');
    const pathLength = svgPath.getTotalLength();
    const movingImage = document.querySelector('.moving-image');
    const markers = document.querySelectorAll('.marker');
    const checkpoints = document.querySelectorAll('.checkpoint');
    const windowHeight = window.innerHeight;

    markers.forEach((marker, index) => {
        const markerPosition = marker.getBoundingClientRect();
        const checkpoint = checkpoints[index];

        checkpoint.style.top = `${markerPosition.top + window.scrollY}px`;

        if (index % 2 === 0) {
            // Position on the left side of the path
            checkpoint.style.left = `calc(50% - 320px)`; // Adjust as needed
        } else {
            // Position on the right side of the path
            checkpoint.style.left = `calc(50% + 320px)`; // Adjust as needed
        }
    });

    function updateMovingImagePosition() {
        const scrollPosition = window.scrollY;
        const maxScroll = document.body.scrollHeight - windowHeight;
        const fraction = scrollPosition / maxScroll;
        const pointAtLength = svgPath.getPointAtLength(fraction * pathLength);

        movingImage.style.top = `${pointAtLength.y}px`;
        movingImage.style.left = `calc(50% + ${pointAtLength.x - 25}px)`; // Center the image horizontally
    }

    document.addEventListener('scroll', function() {
        updateMovingImagePosition();

        checkpoints.forEach(checkpoint => {
            const textBox = checkpoint.querySelector('.text-box');
            const textBoxPosition = textBox.getBoundingClientRect().top;

            if (textBoxPosition < windowHeight - 100) { // Adjust as needed
                textBox.classList.add('visible');
            }
        });
    });

    updateMovingImagePosition(); // Initial position
});

</script>

  
{% endblock %}
