{% extends "layout.html" %}
  
{% block title %}Parts{% endblock %}
{% block lead %}What we used.{% endblock %}

{% block page_content %}

<style>
.plasmid-container {
    position: relative;
}

#plasmid-svg {
    width: 800px;
    height: 800px;
}

path {
    transition: opacity 0.3s;
}

text {
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

.info-container {
    display: none; /* Initially hide all info containers */
    position: absolute;
}

#p1-info {
    top: 0;
    left: 0;
    color: #5499AA;
}

#p2-info {
    top: 0;
    left: 600px;
    color: #F0DFAD;
}

#p3-info {
    top: 600px;
    left: 600px;
    color: #D88993;
}

#ampr-info {
    top: 600px;
    left: 0;
    color: #8B555E;
}

.info-container p {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

h3 {
  margin: 0 0 0 10px; /* Adjust the spacing as needed */
}

.image-container {
  position: relative;
    width:200px;
    height:200px;
 /* Adjust height as needed */
}

.image-container img {
  position: absolute;
  top: 0;
  left: 0;

}

a {
    color:#D88993;
}

a:hover {
    color: #8B555E;
}

html {
    scroll-behavior: smooth;
}

.section-nav li.active > a {
    color: #8B555E;
    font-weight: 500;
}

.section-nav {
    padding-left: 0;
    border-left: 1px solid #D88993;
}

.section-nav a {
    text-decoration: none;
    display: block;
    padding: .125rem 0;
    color: #D88993;
    transition: all 400ms ease-in-out;
}

.section-nav a:hover,
.section-nav a:focus {
    color: #8B555E;
}

section {
    padding-top: 90px;
    margin-top: -90px;
    padding-bottom: 20px;
}
.section-title {
    text-align: center;
    margin-top: 3rem;
    color: #4A4A4A;
    border-bottom: 2px solid #D88993;
    padding-bottom: 10px;
      width: 30%;
    margin-left: auto;
    margin-right: auto;
}
</style>

</div>

<!--
    circle: (x-400)^2+(y+400)^2=(200)^2
    221.546,\ -309.699
    350.969,\ -206.103
    449.031,\ -206.103
    578.454,\ -309.699
    578.454,\ -490.301
    449.031,\ -593.897
    350.969,\ -593.897
    221.546,\ -490.301
-->
<div class="plasmid-container">
    <svg id="plasmid-svg" viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg">
        <!-- Define arcs for different plasmid parts -->
        <circle id="backbone" r="200" cx="400" cy="400" fill="none" stroke=#493B2A stroke-width="40"/>

        <!-- P1 arc with black border -->
        <path id="p1-border" d="M221.546,309.699 A200,200 0 0,1 350.969 206.103" fill="none" stroke="black" stroke-width="45"/>
        <path id="p1" d="M222,308.808 A200,200 0 0,1 350 206.351" fill="none" stroke=#5499AA stroke-width="40"/>

        <!-- P2 arc with black border -->
        <path id="p2-border" d="M449.031,206.103 A200,200 0 0,1 578.454,309.699" fill="none" stroke="black" stroke-width="45"/>
        <path id="p2" d="M450,206.351 A200,200 0 0,1 578,308.808" fill="none" stroke=#F0DFAD stroke-width="40"/>

        <!-- P3 arc with black border -->
        <path id="p3-border" d="M578.454,490.301 A200,200 0 0,1 449.031,593.897" fill="none" stroke="black" stroke-width="45"/>
        <path id="p3" d="M578,491.192 A200,200 0 0,1 450,593.649" fill="none" stroke=#D88993 stroke-width="40"/>

        <!-- ampR arc with black border -->
        <path id="ampr-border" d="M350.969,593.897 A200,200 0 0,1 221.546,490.301" fill="none" stroke="black" stroke-width="45"/>
        <path id="ampr" d="M350,593.649 A200,200 0 0,1 222,491.192" fill="none" stroke=#8B555E stroke-width="40"/>

        <!-- Text labels outside the arcs -->
        <text x="200" y="230" font-family="Poppins" font-size="12" font-weight="500" fill="black">Part 1</text>
        <text x="550" y="230" font-family="Poppins" font-size="12" font-weight="500" fill="black">Part 2</text>
        <text x="550" y="570" font-family="Poppins" font-size="12" font-weight="500" fill="black">Part 3 & 4</text>
        <text x="200" y="570" font-family="Poppins" font-size="12" font-weight="500" fill="black">Amp Resistance</text>

        <!-- Elbow connectors (initially hidden) -->
        <line id="p1-connector1" x1="280" y1="230" x2="250" y2="200" stroke=#5499AA stroke-width="3" visibility="hidden"/>
        <line id="p1-connector2" x1="250" y1="200" x2="160" y2="200" stroke=#5499AA stroke-width="3" visibility="hidden"/>

        <line id="p2-connector1" x1="520" y1="230" x2="550" y2="200" stroke=#F0DFAD stroke-width="3" visibility="hidden"/>
        <line id="p2-connector2" x1="550" y1="200" x2="640" y2="200" stroke=#F0DFAD stroke-width="3" visibility="hidden"/>

        <line id="p3-connector1" x1="520" y1="570" x2="550" y2="600" stroke=#D88993 stroke-width="3" visibility="hidden"/>
        <line id="p3-connector2" x1="550" y1="600" x2="640" y2="600" stroke=#D88993 stroke-width="3" visibility="hidden"/>

        <line id="ampr-connector1" x1="280" y1="570" x2="250" y2="600" stroke=#8B555E stroke-width="3" visibility="hidden"/>
        <line id="ampr-connector2" x1="250" y1="600" x2="160" y2="600" stroke=#8B555E stroke-width="3" visibility="hidden"/>
    </svg>
    <div class="info-container" id="p1-info">
        <h3>Lipase (PNLIP)</h3>
        <p>Encodes the human lipase gene.</p>
    </div>
    <div class="info-container" id="p2-info">
        <h3>Procolipase (CLPS)</h3>
        <p>Encodes the human procolipase gene.</p>
    </div>
    <div class="info-container" id="p3-info">
        <h3>Switch Mechanism</h3>
        <p>Allows regulation of the device by glucose.</p>
    </div>
    <div class="info-container" id="ampr-info">
        <h3>Ampicillin Resistance</h3>
        <p>Adds a drug resistance to confirm plasmid transformation.</p>
    </div>
</div>
</div>
</body>

<script>
    // Appear & reappear sequence
    document.addEventListener('DOMContentLoaded', () => {
const p1 = document.getElementById('p1');
const p2 = document.getElementById('p2');
const p3 = document.getElementById('p3');
const ampr = document.getElementById('ampr');

const p1Info = document.getElementById('p1-info');
const p2Info = document.getElementById('p2-info');
const p3Info = document.getElementById('p3-info');
const amprInfo = document.getElementById('ampr-info');

const p1Connector = document.querySelectorAll('#p1-connector1, #p1-connector2');
const p2Connector = document.querySelectorAll('#p2-connector1, #p2-connector2');
const p3Connector = document.querySelectorAll('#p3-connector1, #p3-connector2');
const amprConnector = document.querySelectorAll('#ampr-connector1, #ampr-connector2');

const showInfo = (infoContainer, path, connector) => {
    // Hide all info containers first
    p1Info.style.display = 'none';
    p2Info.style.display = 'none';
    p3Info.style.display = 'none';
    amprInfo.style.display = 'none';

    // Hide all connectors
    p1Connector.forEach(line => line.style.visibility = 'hidden');
    p2Connector.forEach(line => line.style.visibility = 'hidden');
    p3Connector.forEach(line => line.style.visibility = 'hidden');
    amprConnector.forEach(line => line.style.visibility = 'hidden');

    // Show the relevant info container
    infoContainer.style.display = 'block';

    // Show the relevant connector
    connector.forEach(line => line.style.visibility = 'visible');

    // Dim all paths first
    document.querySelectorAll('path').forEach(p => p.style.opacity = '0.3');

    // Highlight the relevant path and its border
    path.style.opacity = '1';
    document.getElementById(`${path.id}-border`).style.opacity = '1';
};

const hideInfo = () => {
    // Hide all info containers
    p1Info.style.display = 'none';
    p2Info.style.display = 'none';
    p3Info.style.display = 'none';
    amprInfo.style.display = 'none';

    // Hide all connectors
    p1Connector.forEach(line => line.style.visibility = 'hidden');
    p2Connector.forEach(line => line.style.visibility = 'hidden');
    p3Connector.forEach(line => line.style.visibility = 'hidden');
    amprConnector.forEach(line => line.style.visibility = 'hidden');

    // Reset all paths to full opacity
    document.querySelectorAll('path').forEach(p => p.style.opacity = '1');
};

p1.addEventListener('mouseover', () => {
    showInfo(p1Info, p1, p1Connector);
});
p1.addEventListener('mouseout', hideInfo);

p2.addEventListener('mouseover', () => {
    showInfo(p2Info, p2, p2Connector);
});
p2.addEventListener('mouseout', hideInfo);

p3.addEventListener('mouseover', () => {
    showInfo(p3Info, p3, p3Connector);
});
p3.addEventListener('mouseout', hideInfo);

ampr.addEventListener('mouseover', () => {
    showInfo(amprInfo, ampr, amprConnector);
});
ampr.addEventListener('mouseout', hideInfo);
});

</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
      const options = {
          root: null,
          rootMargin: '0px',
          threshold: 0.1
      };

      const observer = new IntersectionObserver(function (entries, observer) {
          entries.forEach(entry => {
              if (entry.isIntersecting) {
                  const progressBars = entry.target.querySelectorAll('.progress-container');
                  progressBars.forEach((progressBar, index) => {
                      const progress = progressBar.querySelector('.progress');
                      setTimeout(() => {
                          if (progressBar.classList.contains('progressbar80')) {
                              progress.classList.add('progressbaranimation80');
                          } else if (progressBar.classList.contains('progressbar90')) {
                              progress.classList.add('progressbaranimation90');
                          } else if (progressBar.classList.contains('progressbar77')) {
                              progress.classList.add('progressbaranimation77');
                          }
                      }, index * 1000); // Delay each animation by 2 seconds
                  });
                  observer.unobserve(entry.target);
              }
          });
      }, options);

      observer.observe(document.querySelector('.allprogressbars'));
  });
</script>


<svg width="1000" height="200">
    <!-- Promoter (Red L-shaped Arrow with Rounded Corners) -->
    <path class="promoter part" d="M 50 100 Q 50 75 75 75 L 75 75" stroke="red" stroke-width="10" fill="none" />
    <polygon class="promoter part" points="75,85 75,65 95,75" fill="red" />
    
    <!-- RiboJ (Green X with squiggle) -->
    <line class="riboJ part" x1="110" y1="62" x2="136" y2="88" stroke="green" stroke-width="5" />
    <line class="riboJ part" x1="136" y1="62" x2="110" y2="88" stroke="green" stroke-width="5" />
    <path class="riboJ part" d="M 123 100 Q 118 85 123 75" stroke="green" stroke-width="5" fill="none" />
    
    <!-- Ribosomal Binding Site (Orange Half Circle) -->
    <path class="ribosome part" d="M 150 90 A 25 25 0 1 1 200 90" fill="orange" stroke="orange" stroke-width="10" />
    
    <!-- Terminator (Black T) -->
    <rect class="terminator part" x="630" y="65" width="20" height="30" fill="black" />
    <rect class="terminator part" x="620" y="65" width="40" height="10" fill="black" />

    <!-- Background Line -->
    <line id="background-line" x1="30" y1="100" x2="790" y2="100" stroke="#708090" stroke-width="20" />

    <!-- Signal Peptide Sequence (Purple Rectangle) -->
    <rect class="signal-peptide part" x="210" y="75" width="50" height="50" fill="purple" />
    
    <!-- His6 Tag (Yellow Rectangle) -->
    <rect class="his6-tag part" x="260" y="75" width="50" height="50" fill="yellow" />
    
    <!-- Coding Sequence (Blue Arrow) -->
    <rect class="coding-sequence part" x="310" y="75" width="250" height="50" fill="blue" />
    <polygon class="coding-sequence part" points="560,75 560,125 610,100" fill="blue" />
</svg>

<div id="info-box" class="info-box"></div>

<script>
    const parts = document.querySelectorAll('.part');
    const infoBox = document.getElementById('info-box');

    const partInfo = {
        "promoter": "Promoter: Initiates transcription of the gene.",
        "riboJ": "RiboJ: Protects RNA from degradation and improves gene expression.",
        "ribosome": "Ribosomal Binding Site: Facilitates the binding of ribosomes for translation.",
        "signal-peptide": "Signal Peptide: Directs the transport of the protein.",
        "his6-tag": "His6 Tag: Used for protein purification.",
        "coding-sequence": "Coding Sequence: Encodes the protein.",
        "terminator": "Terminator: Signals the end of transcription."
    };

    parts.forEach(part => {
        const className = Array.from(part.classList).find(cls => cls !== 'part');

        part.addEventListener('mouseover', function(event) {
            parts.forEach(p => {
                if (!p.classList.contains(className)) {
                    p.style.opacity = '0.5';
                }
            });
            infoBox.style.display = 'block';
            infoBox.innerHTML = partInfo[className];
            infoBox.style.left = (event.pageX + 10) + 'px';
            infoBox.style.top = (event.pageY + 10) + 'px';
        });

        part.addEventListener('mouseout', function() {
            parts.forEach(p => {
                p.style.opacity = '1';
            });
            infoBox.style.display = 'none';
        });
    });
</script>
{% endblock %}