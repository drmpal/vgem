{% extends "layout.html" %}
{% block title %}Engineering{% endblock %}

{% block page_content %}
<style>

.plasmid-container {
    position: relative;
}

#plasmid-svg {
    width: 500px;
    height: 500px;
}

path {
    transition: opacity 0.3s;
}

text {
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

.info-container {
    display: none; /* Initially hide all info containers */
    position: absolute;
}

#promoter-info {
    top: 0;
    left: 350px;
    color: green;
}

#coding-sequence-info {
    top: 220px;
    left: 520px;
    color: blue;
}

#terminator-info {
    top: 440px;
    left: 350px;
    color: red;
}

.info-container p {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

</style>

    <div class="plasmid-container">
        <svg id="plasmid-svg" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
            <!-- Define arcs for different plasmid parts -->
            <path id="promoter-border" d="M250,50 A120,120 0 0,1 150 150" fill="none" stroke="gray" stroke-width="6"/>

            <!-- Promoter arc with black border -->
            <path id="promoter-border" d="M250,50 A120,120 0 0,1 270 150" fill="none" stroke="black" stroke-width="8"/>
            <path id="promoter" d="M250,50 A120,120 0 0,1 270,150" fill="none" stroke="red" stroke-width="6"/>

            <!-- Coding sequence arc with black border -->
            <path id="coding-sequence-border" d="M450,250 A120,120 0 0,1 150,270" fill="none" stroke="black" stroke-width="8"/>
            <path id="coding-sequence" d="M450,250 A120,120 0 0,1 150,270" fill="none" stroke="green" stroke-width="6"/>

            <!-- Terminator arc with black border -->
            <path id="terminator-border" d="M250,450 A120,120 0 0,1 30,150" fill="none" stroke="black" stroke-width="8"/>
            <path id="terminator" d="M250,450 A120,120 0 0,1 30,150" fill="none" stroke="blue" stroke-width="6"/>

            <!-- Text labels outside the arcs -->
            <text x="60" y="25" font-family="Poppins" font-size="12" font-weight="500" fill="green">pT7lac</text>
            <text x="245" y="160" font-family="Poppins" font-size="12" font-weight="500" fill="blue">PNLIP</text>
            <text x="75" y="290" font-family="Poppins" font-size="12" font-weight="500" fill="red">B0015</text>

            <!-- Elbow connectors (initially hidden) -->
            <line id="promoter-connector1" x1="150" y1="30" x2="170" y2="10" stroke="green" stroke-width="2" visibility="hidden"/>
            <line id="promoter-connector2" x1="170" y1="10" x2="230" y2="10" stroke="green" stroke-width="2" visibility="hidden"/>

            <line id="coding-sequence-connector1" x1="270" y1="150" x2="290" y2="170" stroke="blue" stroke-width="2" visibility="hidden"/>
            <line id="coding-sequence-connector2" x1="290" y1="170" x2="340" y2="170" stroke="blue" stroke-width="2" visibility="hidden"/>

            <line id="terminator-connector1" x1="150" y1="270" x2="170" y2="290" stroke="red" stroke-width="2" visibility="hidden"/>
            <line id="terminator-connector2" x1="170" y1="290" x2="230" y2="290" stroke="red" stroke-width="2" visibility="hidden"/>
        </svg>
        <div class="info-container" id="promoter-info">
            <h3>Promoter Region (pT7lac)</h3>
            <p>Gene initation point regulated by glucose.</p>
        </div>
        <div class="info-container" id="coding-sequence-info">
            <h3>Coding Sequence (PNLIP)</h3>
            <p>Encodes the human pancreatic lipase gene.</p>
        </div>
        <div class="info-container" id="terminator-info">
            <h3>Terminator (B0015)</h3>
            <p>Signals the end of transcription.</p>
        </div>
    </div>
<script>
        // Appear & reappear sequence
        document.addEventListener('DOMContentLoaded', () => {
    const promoter = document.getElementById('promoter');
    const codingSequence = document.getElementById('coding-sequence');
    const terminator = document.getElementById('terminator');

    const promoterInfo = document.getElementById('promoter-info');
    const codingSequenceInfo = document.getElementById('coding-sequence-info');
    const terminatorInfo = document.getElementById('terminator-info');

    const promoterConnector = document.querySelectorAll('#promoter-connector1, #promoter-connector2');
    const codingSequenceConnector = document.querySelectorAll('#coding-sequence-connector1, #coding-sequence-connector2');
    const terminatorConnector = document.querySelectorAll('#terminator-connector1, #terminator-connector2');

    const showInfo = (infoContainer, path, connector) => {
        // Hide all info containers first
        promoterInfo.style.display = 'none';
        codingSequenceInfo.style.display = 'none';
        terminatorInfo.style.display = 'none';

        // Hide all connectors
        promoterConnector.forEach(line => line.style.visibility = 'hidden');
        codingSequenceConnector.forEach(line => line.style.visibility = 'hidden');
        terminatorConnector.forEach(line => line.style.visibility = 'hidden');

        // Show the relevant info container
        infoContainer.style.display = 'block';

        // Show the relevant connector
        connector.forEach(line => line.style.visibility = 'visible');

        // Dim all paths first
        document.querySelectorAll('path').forEach(p => p.style.opacity = '0.3');

        // Highlight the relevant path and its border
        path.style.opacity = '1';
        document.getElementById(`${path.id}-border`).style.opacity = '1';
    };

    const hideInfo = () => {
        // Hide all info containers
        promoterInfo.style.display = 'none';
        codingSequenceInfo.style.display = 'none';
        terminatorInfo.style.display = 'none';

        // Hide all connectors
        promoterConnector.forEach(line => line.style.visibility = 'hidden');
        codingSequenceConnector.forEach(line => line.style.visibility = 'hidden');
        terminatorConnector.forEach(line => line.style.visibility = 'hidden');

        // Reset all paths to full opacity
        document.querySelectorAll('path').forEach(p => p.style.opacity = '1');
    };

    promoter.addEventListener('mouseover', () => {
        showInfo(promoterInfo, promoter, promoterConnector);
    });
    promoter.addEventListener('mouseout', hideInfo);

    codingSequence.addEventListener('mouseover', () => {
        showInfo(codingSequenceInfo, codingSequence, codingSequenceConnector);
    });
    codingSequence.addEventListener('mouseout', hideInfo);

    terminator.addEventListener('mouseover', () => {
        showInfo(terminatorInfo, terminator, terminatorConnector);
    });
    terminator.addEventListener('mouseout', hideInfo);
});

</script>

{% endblock %}