{% extends "layout.html" %}
{% block title %}Engineering{% endblock %}

{% block page_content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Plasmid Construct</title>
    <style>
        body {
    font-family: "Poppins", sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #f0f0f0;
}

.plasmid-container {
    position: relative;
}

#plasmid-svg {
    width: 400px;
    height: 400px;
}

path {
    transition: opacity 0.3s;
}

textPath {
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

.info-container {
    display: none; /* Initially hide all info containers */
    position: absolute;
    top: 0px;
    left: 220px; /* Position the info box next to the SVG */
    background-color: #fff;
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    z-index: 10;
}

.info-container h3 {
    margin-top: 0;
}
    </style>
</head>
<body>
    <div class="plasmid-container">
        <svg id="plasmid-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <!-- Define arcs for different plasmid parts -->
            <!-- Plasmid backbone -->
            <path id="plasmid-backbone" d="M100,20 A80,80 0 1,1 99,20.006" fill="none" stroke="gray" stroke-wdith="10"/>

            <!-- Promoter arc with black border -->
            <path id="promoter-border" d="M43.431,43.431 A80,80 0 0,1 79,22.805" fill="none" stroke="black" stroke-width="8"/>
            <path id="promoter" d="M43.431,43.431 A80,80 0 0,1 79,22.805" fill="none" stroke="green" stroke-width="6"/>

            <!-- Coding sequence arc with black border -->
            <path id="coding-sequence-border" d="M100,20 A80,80 0 0,1 150,37.55" fill="none" stroke="black" stroke-width="8"/>
            <path id="coding-sequence" d="M100,20 A80,80 0 0,1 150,37.55" fill="none" stroke="blue" stroke-width="6"/>

            <!-- Terminator arc with black border -->
            <path id="terminator-border" d="M150,37.55 A80,80 0 0,1 162.45,50" fill="none" stroke="black" stroke-width="8"/>
            <path id="terminator" d="M150,37.55 A80,80 0 0,1 162.45,50" fill="none" stroke="yellow" stroke-width="6"/>

            <!-- Text along arcs -->
            <text font-family="Poppins" font-size="12" font-weight="500">
                <textPath href="#promoter" startOffset="50%" text-anchor="middle" transform="translate(70,26)">pT7lac</textPath>
            </text>
            <text font-family="Poppins" font-size="12" font-weight="500">
                <textPath href="#coding-sequence" startOffset="50%" text-anchor="middle" transform="translate(130,20)">PNLIP</textPath>
            </text>
            <text font-family="Poppins" font-size="12" font-weight="500">
                <textPath href="#terminator" startOffset="50%" text-anchor="middle" transform="translate(160,35)">B0015</textPath>
            </text>
        </svg>
        <div class="info-container" id="promoter-info">
            <h3>Promoter Region (pT7lac)</h3>
            <p>Gene initation point regulated by glucose.</p>
        </div>
        <div class="info-container" id="coding-sequence-info">
            <h3>Coding Sequence (PNLIP)</h3>
            <p>Encodes the human pancreatic lipase gene.</p>
        </div>
        <div class="info-container" id="terminator-info">
            <h3>Terminator (B0015)</h3>
            <p>Signals the end of transcription.</p>
        </div>
    </div>
    <script>
        // Appear & reappear sequence
document.addEventListener('DOMContentLoaded', () => {
    const promoter = document.getElementById('promoter');
    const codingSequence = document.getElementById('coding-sequence');
    const terminator = document.getElementById('terminator');

    const promoterText = document.getElementById('promoter-text');
    const codingSequenceText = document.getElementById('coding-sequence-text');
    const terminatorText = document.getElementById('terminator-text');

    const promoterInfo = document.getElementById('promoter-info');
    const codingSequenceInfo = document.getElementById('coding-sequence-info');
    const terminatorInfo = document.getElementById('terminator-info');

    const promoterColorInput = document.getElementById('promoter-color');
    const codingSequenceColorInput = document.getElementById('coding-sequence-color');
    const terminatorColorInput = document.getElementById('terminator-color');

    const showInfo = (infoContainer, path) => {
        // Hide all info containers first
        promoterInfo.style.display = 'none';
        codingSequenceInfo.style.display = 'none';
        terminatorInfo.style.display = 'none';

        // Show the relevant info container
        infoContainer.style.display = 'block';

        // Dim all paths first
        document.querySelectorAll('path').forEach(p => p.style.opacity = '0.3');

        // Highlight the relevant path and its border
        path.style.opacity = '1';
        document.getElementById(`${path.id}-border`).style.opacity = '1';
    };

    const hideInfo = () => {
        // Hide all info containers
        promoterInfo.style.display = 'none';
        codingSequenceInfo.style.display = 'none';
        terminatorInfo.style.display = 'none';

        // Reset all paths to full opacity
        document.querySelectorAll('path').forEach(p => p.style.opacity = '1');
    };

    promoter.addEventListener('mouseover', () => {
        showInfo(promoterInfo, promoter);
    });
    promoter.addEventListener('mouseout', hideInfo);

    codingSequence.addEventListener('mouseover', () => {
        showInfo(codingSequenceInfo, codingSequence);
    });
    codingSequence.addEventListener('mouseout', hideInfo);

    terminator.addEventListener('mouseover', () => {
        showInfo(terminatorInfo, terminator);
    });
    terminator.addEventListener('mouseout', hideInfo);
});
    </script>
</body>
</html>

{% endblock %}