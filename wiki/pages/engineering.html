{% extends "layout.html" %}
{% block title %}Engineering{% endblock %}

{% block page_content %}
<style>

.page-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    width: 100%;
}

.plasmid-container {
    position: relative;
}

#plasmid-svg {
    width: 500px;
    height: 500px;
}

path {
    transition: opacity 0.3s;
}

text {
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

.info-container {
    display: none; /* Initially hide all info containers */
    position: absolute;
}

#p1-info {
    top: 0;
    left: 350px;
    color: #5499AA;
}

#p2-info {
    top: 220px;
    left: 520px;
    color: #F0DFAD;
}

#p3-info {
    top: 440px;
    left: 350px;
    color: #D88993;
}

#ampr-info {
    top: 0;
    left: 350px;
    color: #8B555E;
}

.info-container p {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

</style>
<div class="page-container">
    <div class="plasmid-container">
        <svg id="plasmid-svg" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
            <!-- Define arcs for different plasmid parts -->
            <path id="promoter-border" d="M250,50 A200,200 0 0,1 249 50.003" fill="none" stroke=#493B2A stroke-width="4"/>

            <!-- P1 arc with black border -->
            <path id="p1-border" d="M72,158.808 A200,200 0 0,1 200 56.351" fill="none" stroke="black" stroke-width="12"/>
            <path id="p1" d="M72,158.808 A200,200 0 0,1 200 56.351" fill="none" stroke=#5499AA stroke-width="10"/>

            <!-- P2 arc with black border -->
            <path id="p2-border" d="M300,56.351 A200,200 0 0,1 428,158.808" fill="none" stroke="black" stroke-width="12"/>
            <path id="p2" d="M300,56.351 A200,200 0 0,1 428,158.808" fill="none" stroke=#F0DFAD stroke-width="10"/>

            <!-- P3 arc with black border -->
            <path id="p3-border" d="M428,341.192 A200,200 0 0,1 300,443.649" fill="none" stroke="black" stroke-width="12"/>
            <path id="p3" d="M428,158.808 A200,200 0 0,1 300,443.649" fill="none" stroke=#D88993 stroke-width="10"/>

            <!-- ampR arc with black border -->
            <path id="ampr-border" d="M200,443.649 A200,200 0 0,1 72,341.192" fill="none" stroke="black" stroke-width="12"/>
            <path id="ampr" d="M250,450 A200,200 0 0,1 50,250" fill="none" stroke=#8B555E stroke-width="10"/>

            <!-- Text labels outside the arcs -->
            <text x="60" y="25" font-family="Poppins" font-size="12" font-weight="500" fill="black">Part 1</text>
            <text x="245" y="160" font-family="Poppins" font-size="12" font-weight="500" fill="black">Part 2</text>
            <text x="75" y="290" font-family="Poppins" font-size="12" font-weight="500" fill="black">Part 3 & 4</text>
            <text x="75" y="290" font-family="Poppins" font-size="12" font-weight="500" fill="black">Amp Resistance</text>

            <!-- Elbow connectors (initially hidden) -->
            <line id="p1-connector1" x1="150" y1="30" x2="170" y2="10" stroke=#5499AA stroke-width="3" visibility="hidden"/>
            <line id="p1-connector2" x1="170" y1="10" x2="230" y2="10" stroke=#5499AA stroke-width="3" visibility="hidden"/>

            <line id="p2-connector1" x1="270" y1="150" x2="290" y2="170" stroke=#F0DFAD stroke-width="3" visibility="hidden"/>
            <line id="p2-connector2" x1="290" y1="170" x2="340" y2="170" stroke=#F0DFAD stroke-width="3" visibility="hidden"/>

            <line id="p3-connector1" x1="150" y1="270" x2="170" y2="290" stroke=#D88993 stroke-width="3" visibility="hidden"/>
            <line id="p3-connector2" x1="170" y1="290" x2="230" y2="290" stroke=#D88993 stroke-width="3" visibility="hidden"/>

            <line id="ampr-connector1" x1="150" y1="270" x2="170" y2="290" stroke=#8B555E stroke-width="3" visibility="hidden"/>
            <line id="ampr-connector2" x1="170" y1="290" x2="230" y2="290" stroke=#8B555E stroke-width="3" visibility="hidden"/>
        </svg>
        <div class="info-container" id="p1-info">
            <h3>Lipase (PNLIP)</h3>
            <p>Encodes the human lipase gene.</p>
        </div>
        <div class="info-container" id="p2-info">
            <h3>Procolipase (CLPS)</h3>
            <p>Encodes the human procolipase gene.</p>
        </div>
        <div class="info-container" id="p3-info">
            <h3>Switch Mechanism</h3>
            <p>Allows regulation of the device by glucose.</p>
        </div>
        <div class="info-container" id="ampr-info">
            <h3>Ampicillin Resistance</h3>
            <p>Adds a drug resistance to confirm plasmid transformation.</p>
        </div>
    </div>
</div>
<script>
        // Appear & reappear sequence
        document.addEventListener('DOMContentLoaded', () => {
    const p1 = document.getElementById('p1');
    const p2 = document.getElementById('p2');
    const p3 = document.getElementById('p3');
    const ampr = document.getElementById('ampr');

    const p1Info = document.getElementById('p1-info');
    const p2Info = document.getElementById('p2-info');
    const p3Info = document.getElementById('p3-info');
    const amprInfo = document.getElementById('ampr-info');

    const p1Connector = document.querySelectorAll('#p1-connector1, #p1-connector2');
    const p2Connector = document.querySelectorAll('#p2-connector1, #p2-connector2');
    const p3Connector = document.querySelectorAll('#p3-connector1, #p3-connector2');
    const amprConnector = document.querySelectorAll('#ampr-connector1, #ampr-connector2');

    const showInfo = (infoContainer, path, connector) => {
        // Hide all info containers first
        p1Info.style.display = 'none';
        p2Info.style.display = 'none';
        p3Info.style.display = 'none';
        amprInfo.style.display = 'none';

        // Hide all connectors
        p1Connector.forEach(line => line.style.visibility = 'hidden');
        p2Connector.forEach(line => line.style.visibility = 'hidden');
        p3Connector.forEach(line => line.style.visibility = 'hidden');
        amprConnector.forEach(line => line.style.visibility = 'hidden');

        // Show the relevant info container
        infoContainer.style.display = 'block';

        // Show the relevant connector
        connector.forEach(line => line.style.visibility = 'visible');

        // Dim all paths first
        document.querySelectorAll('path').forEach(p => p.style.opacity = '0.3');

        // Highlight the relevant path and its border
        path.style.opacity = '1';
        document.getElementById(`${path.id}-border`).style.opacity = '1';
    };

    const hideInfo = () => {
        // Hide all info containers
        p1Info.style.display = 'none';
        p2Info.style.display = 'none';
        p3Info.style.display = 'none';
        amprInfo.style.display = 'none';

        // Hide all connectors
        p1Connector.forEach(line => line.style.visibility = 'hidden');
        p2Connector.forEach(line => line.style.visibility = 'hidden');
        p3Connector.forEach(line => line.style.visibility = 'hidden');
        amprConnector.forEach(line => line.style.visibility = 'hidden');

        // Reset all paths to full opacity
        document.querySelectorAll('path').forEach(p => p.style.opacity = '1');
    };

    p1.addEventListener('mouseover', () => {
        showInfo(p1Info, p1, p1Connector);
    });
    p1.addEventListener('mouseout', hideInfo);

    p2.addEventListener('mouseover', () => {
        showInfo(p2Info, p2, p2Connector);
    });
    p2.addEventListener('mouseout', hideInfo);

    p3.addEventListener('mouseover', () => {
        showInfo(p3Info, p3, p3Connector);
    });
    p3.addEventListener('mouseout', hideInfo);

    ampr.addEventListener('mouseover', () => {
        showInfo(p3Info, p3, p3Connector);
    });
    ampr.addEventListener('mouseout', hideInfo);
});

</script>

{% endblock %}